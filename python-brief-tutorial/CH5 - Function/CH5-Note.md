- [CH5 - å‡½æ•°](#ch5---å‡½æ•°)
  - [5.1 å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨](#51-å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨)
    - [5.1.1 ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°](#511-ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°)
    - [5.1.2 å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨](#512-å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨)
    - [5.1.3 å‚æ•°ä¼ é€’](#513-å‚æ•°ä¼ é€’)
    - [5.1.4 å‡½æ•°ä½“ä¸å˜é‡ä½œç”¨åŸŸ](#514-å‡½æ•°ä½“ä¸å˜é‡ä½œç”¨åŸŸ)
    - [5.1.5 è¿”å›å€¼](#515-è¿”å›å€¼)
    - [5.1.6 å»ºè®®](#516-å»ºè®®)
  - [5.2 å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹](#52-å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹)
  - [5.3 åŒ¿åå‡½æ•°](#53-åŒ¿åå‡½æ•°)
  - [5.4 é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡](#54-é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡)


# CH5 - å‡½æ•°

![](https://raw.githubusercontent.com/timerring/picgo/master/picbed/image-20220925215610422.png)

## 5.1 å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨

![](https://raw.githubusercontent.com/timerring/picgo/master/picbed/image-20220925215624577.png)

### 5.1.1 ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°

1ã€æé«˜ä»£ç å¤ç”¨æ€§â€”â€”æŠ½è±¡å‡ºæ¥ï¼Œå°è£…ä¸ºå‡½æ•°   

2ã€å°†å¤æ‚çš„å¤§é—®é¢˜åˆ†è§£æˆä¸€ç³»åˆ—å°é—®é¢˜ï¼Œåˆ†è€Œæ²»ä¹‹â€”â€”æ¨¡å—åŒ–è®¾è®¡çš„æ€æƒ³  

3ã€åˆ©äºä»£ç çš„ç»´æŠ¤å’Œç®¡ç†

**é¡ºåºå¼**


```python
# 5çš„é˜¶ä¹˜
n = 5
res = 1
for i in range(1, n+1):
    res *= i
print(res)

# 20çš„é˜¶ä¹˜
n = 20
res = 1
for i in range(1, n+1):
    res *= i
print(res)
```

    120
    2432902008176640000


**æŠ½è±¡æˆå‡½æ•°**


```python
def factoria(n):
    res = 1
    for i in range(1,n+1):
        res *= i
    return res


print(factoria(5))
print(factoria(20))
```

    120
    2432902008176640000


### 5.1.2 å‡½æ•°çš„å®šä¹‰åŠè°ƒç”¨

**ç™½ç®±å­ï¼šè¾“å…¥â€”â€”å¤„ç†â€”â€”è¾“å‡º**   

**ä¸‰è¦ç´ ï¼šå‚æ•°ã€å‡½æ•°ä½“ã€è¿”å›å€¼**

**1ã€å®šä¹‰** 

def&nbsp; å‡½æ•°åï¼ˆå‚æ•°ï¼‰ï¼š

&emsp;  å‡½æ•°ä½“  

&emsp;  return è¿”å›å€¼



```python
# æ±‚æ­£æ–¹å½¢çš„é¢ç§¯
def area_of_square(length_of_side):
    square_area = pow(length_of_side, 2)
    return square_area    
```

**2ã€è°ƒç”¨**  

å‡½æ•°åï¼ˆå‚æ•°ï¼‰


```python
area = area_of_square(5)
area
```


    25



### 5.1.3 å‚æ•°ä¼ é€’

**0ã€å½¢å‚ä¸å®å‚**

* å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰ï¼šå‡½æ•°å®šä¹‰æ—¶çš„å‚æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯å˜é‡å

* å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰ï¼šå‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯å˜é‡çš„å€¼

**1ã€ä½ç½®å‚æ•°**

* ä¸¥æ ¼æŒ‰ç…§ä½ç½®é¡ºåºï¼Œç”¨å®å‚å¯¹å½¢å‚è¿›è¡Œèµ‹å€¼(å…³è”ï¼‰  

* ä¸€èˆ¬ç”¨åœ¨å‚æ•°æ¯”è¾ƒå°‘çš„æ—¶å€™


```python
def function(x, y, z):
    print(x, y, z)
    
    
function(1, 2, 3)    # x = 1; y = 2; z = 3
```

    1 2 3


* å®å‚ä¸å½¢å‚ä¸ªæ•°å¿…é¡»ä¸€ä¸€å¯¹åº”ï¼Œä¸€ä¸ªä¸èƒ½å¤šï¼Œä¸€ä¸ªä¸èƒ½å°‘


```python
function(1, 2)
```


    ---------------------------------------------------------------------------
    
    TypeError                                 Traceback (most recent call last)
    
    <ipython-input-6-2a7da6ff9675> in <module>
    ----> 1 function(1, 2)


    TypeError: function() missing 1 required positional argument: 'z'



```python
function(1, 2, 3, 4)
```


    ---------------------------------------------------------------------------
    
    TypeError                                 Traceback (most recent call last)
    
    <ipython-input-8-748d3d0335e6> in <module>
    ----> 1 function(1, 2, 3, 4)


    TypeError: function() takes 3 positional arguments but 4 were given


**2ã€å…³é”®å­—å‚æ•°**

* æ‰“ç ´ä½ç½®é™åˆ¶ï¼Œç›´å‘¼å…¶åçš„è¿›è¡Œå€¼çš„ä¼ é€’ï¼ˆå½¢å‚=å®å‚ï¼‰

* å¿…é¡»éµå®ˆå®å‚ä¸å½¢å‚æ•°é‡ä¸Šä¸€ä¸€å¯¹åº”

* å¤šç”¨åœ¨å‚æ•°æ¯”è¾ƒå¤šçš„åœºåˆ


```python
def function(x, y, z):
    print(x, y, z)
    
    
function(y=1, z=2, x=3)    # x = 1; y = 2; z = 3
```

    3 1 2


* ä½ç½®å‚æ•°å¯ä»¥ä¸å…³é”®å­—å‚æ•°æ··åˆä½¿ç”¨

* ä½†æ˜¯ï¼Œä½ç½®å‚æ•°å¿…é¡»æ”¾åœ¨å…³é”®å­—å‚æ•°å‰é¢


```python
function(1, z=2, y=3)
```

    1 3 2



```python
function(1, 2, z=3)
```

    1 2 3


* ä¸èƒ½ä¸ºåŒä¸€ä¸ªå½¢å‚é‡å¤ä¼ å€¼


```python
def function(x, y, z):
    print(x, y, z)


function(1, z=2, x=3)
```


    ---------------------------------------------------------------------------
    
    TypeError                                 Traceback (most recent call last)
    
    <ipython-input-12-f385272db011> in <module>
          3 
          4 
    ----> 5 function(1, z=2, x=3)


    TypeError: function() got multiple values for argument 'x'


**3ã€é»˜è®¤å‚æ•°**

* åœ¨å®šä¹‰é˜¶æ®µå°±ç»™å½¢å‚èµ‹å€¼â€”â€”è¯¥å½¢å‚çš„å¸¸ç”¨å€¼

* åœ¨å®šä¹‰é˜¶æ®µå°±ç»™å½¢å‚èµ‹å€¼â€”â€”è¯¥å½¢å‚çš„å¸¸ç”¨å€¼

* **é»˜è®¤å‚æ•°å¿…é¡»æ”¾åœ¨éé»˜è®¤å‚æ•°åé¢**

* **è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¸å¯¹è¯¥å½¢å‚ä¼ å€¼**

* æœºå™¨å­¦ä¹ åº“ä¸­ç±»çš„æ–¹æ³•é‡Œéå¸¸å¸¸è§


```python
def register(name, age, sex="male"):
    print(name, age, sex)


register("timerring", 18)
```

    timerring 18 male


* ä¹Ÿå¯ä»¥æŒ‰æ­£å¸¸çš„å½¢å‚è¿›è¡Œä¼ å€¼


```python
register("Kanye", 40, "female")
```

    Kanye 40 female


* é»˜è®¤å‚æ•°åº”è¯¥è®¾ç½®ä¸ºä¸å¯å˜ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ï¼‰


```python
def function(ls=[]):
    print(id(ls))
    ls.append(1)
    print(id(ls))
    print(ls)


function()
```

    1759752744328
    1759752744328
    [1]



```python
function()
```

    1759752744328
    1759752744328
    [1, 1]



```python
function()
```

    1759752744328
    1759752744328
    [1, 1, 1]


**ç”±ä¸Šå¯è§ï¼Œåˆ—è¡¨çš„åœ°å€å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚æ¯æ¬¡æ“ä½œå°±æ˜¯åœ¨åŸåœ°å€åˆ—è¡¨ä¸Šè¿›è¡Œæ“ä½œï¼Œå†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå› æ­¤å°±å¥½åƒæœ‰äº†è®°å¿†åŠŸèƒ½ä¸€æ ·ã€‚å› ä¸ºé»˜è®¤å‚æ•°è¢«è®¾ç½®ä¸ºåˆ—è¡¨è¿™ç§å¯å˜ç±»å‹ã€‚**


```python
def function(ls="Python"):
    print(id(ls))
    ls += "3.7"
    print(id(ls))
    print(ls)
    
    
function()
```

    1759701700656
    1759754352240
    Python3.7



```python
function()
```

    1759701700656
    1759754353328
    Python3.7



```python
function()
```

    1759701700656
    1759754354352
    Python3.7


**ä¸ä¼šäº§ç”Ÿâ€œè®°å¿†åŠŸèƒ½â€ï¼Œæ¯æ¬¡å¢é‡ååˆ°æ–°çš„åœ°å€**

* **è®©å‚æ•°å˜æˆå¯é€‰çš„**


```python
def name(first_name, last_name, middle_name=None):
    if middle_name:
        return first_name+middle_name+last_name
    else:
        return first_name+last_name
    
    
print(name("T","R"))
print(name("T", "R", "!"))
```

    TR
    T!R


**4ã€å¯å˜é•¿å‚æ•°&emsp;*args**

* ä¸çŸ¥é“ä¼šä¼ è¿‡æ¥å¤šå°‘å‚æ•°  *args  

* è¯¥å½¢å‚å¿…é¡»æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€å


```python
def foo(x, y, z, *args):
    print(x, y ,z)
    print(args)
    
    
foo(1, 2, 3, 4, 5, 6)    # å¤šä½™çš„å‚æ•°ï¼Œæ‰“åŒ…ä¼ é€’ç»™args
```

    1 2 3
    (4, 5, 6)


* å®å‚æ‰“æ•£


```python
def foo(x, y, z, *args):
    print(x, y ,z)
    print(args)

    
foo(1, 2, 3, [4, 5, 6])    #åˆ—è¡¨è¢«æ‰“åŒ…æˆå…ƒç»„èµ‹å€¼ç»™args
```

    1 2 3
    ([4, 5, 6],)



```python
foo(1, 2, 3, *[4, 5, 6])   # *å°†è¿™äº›åˆ—è¡¨æ‰“æ•£ï¼Œæ‰“æ•£çš„æ˜¯åˆ—è¡¨ã€å­—ç¬¦ä¸²ã€å…ƒç»„æˆ–é›†åˆ
```

    1 2 3
    (4, 5, 6)


**5ã€å¯å˜é•¿å‚æ•°&emsp;****kwargs


```python
def foo(x, y, z, **kwargs):
    print(x, y ,z)
    print(kwargs)
    
    
foo(1, 2, 3, a=4, b=5, c=6)    #  å¤šä½™çš„å‚æ•°ï¼Œä»¥å­—å…¸çš„å½¢å¼æ‰“åŒ…ä¼ é€’ç»™kwargs
```

    1 2 3
    {'a': 4, 'b': 5, 'c': 6}


* å­—å…¸å®å‚æ‰“æ•£


```python
def foo(x, y, z, **kwargs):
    print(x, y ,z)
    print(kwargs)

    
foo(1, 2, 3, **{"a": 4, "b": 5, "c":6})
```

    1 2 3
    {'a': 4, 'b': 5, 'c': 6}


* **å¯å˜é•¿å‚æ•°çš„ç»„åˆä½¿ç”¨**


```python
def foo(*args, **kwargs):
    print(args)
    print(kwargs)
    
    
foo(1, 2, 3, a=4, b=5, c=6) 
```

    (1, 2, 3)
    {'a': 4, 'b': 5, 'c': 6}


### 5.1.4 å‡½æ•°ä½“ä¸å˜é‡ä½œç”¨åŸŸ

* å‡½æ•°ä½“å°±æ˜¯ä¸€æ®µåªåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œä»£ç æ„æˆä¸å…¶ä»–ä»£ç å¹¶æ— ä¸åŒ  

* **å±€éƒ¨å˜é‡**â€”â€”ä»…åœ¨å‡½æ•°ä½“å†…å®šä¹‰å’Œå‘æŒ¥ä½œç”¨


```python
def multipy(x, y):
    z = x*y
    return z   


multipy(2, 9)
print(z)            # å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå±€éƒ¨å˜é‡zå·²ç»è¢«é‡Šæ”¾æ‰äº†
```


    ---------------------------------------------------------------------------
    
    NameError                                 Traceback (most recent call last)
    
    <ipython-input-29-9a7fd4c4c0a9> in <module>
          5 
          6 multipy(2, 9)
    ----> 7 print(z)            # å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå±€éƒ¨å˜é‡zå·²ç»è¢«é‡Šæ”¾æ‰äº†


    NameError: name 'z' is not defined


* **å…¨å±€å˜é‡**â€”â€”å¤–éƒ¨å®šä¹‰çš„éƒ½æ˜¯å…¨å±€å˜é‡

* å…¨å±€å˜é‡å¯ä»¥åœ¨å‡½æ•°ä½“å†…ç›´æ¥è¢«ä½¿ç”¨


```python
n = 3
ls = [0]
def multipy(x, y):
    z = n*x*y
    ls.append(z)
    return z   


print(multipy(2, 9))
ls
```

    54
    
    [0, 54]



* é€šè¿‡global åœ¨å‡½æ•°ä½“å†…å®šä¹‰å…¨å±€å˜é‡


```python
def multipy(x, y):
    global z
    z = x*y
    return z 


print(multipy(2, 9))
print(z)
```

    18
    18


### 5.1.5 è¿”å›å€¼

**1ã€å•ä¸ªè¿”å›å€¼**


```python
def foo(x):
    return x**2


res = foo(10)
res
```


    100



**2ã€å¤šä¸ªè¿”å›å€¼**â€”â€”ä»¥å…ƒç»„çš„å½¢å¼


```python
def foo(x):
    return 1, x, x**2, x**3    # é€—å·åˆ†å¼€ï¼Œæ‰“åŒ…è¿”å›


print(foo(3))
```

    (1, 3, 9, 27)



```python
a, b , c, d = foo(3)       # è§£åŒ…èµ‹å€¼
print(a)
print(b)
print(c)
print(d)
```

    1
    3
    9
    27


**3ã€å¯ä»¥æœ‰å¤šä¸ªreturn è¯­å¥ï¼Œä¸€æ—¦å…¶ä¸­ä¸€ä¸ªæ‰§è¡Œï¼Œä»£è¡¨äº†å‡½æ•°è¿è¡Œçš„ç»“æŸ**


```python
def is_holiday(day):
    if day in ["Sunday", "Saturday"]:
        return "Is holiday"
    else:
        return "Not holiday"
    print("æ¬¢è¿è®¢é˜…")       # ä¸ä¼šè¿è¡Œ
    
    
print(is_holiday("Sunday"))
print(is_holiday("Monday"))
```

    Is holiday
    Not holiday


**4ã€æ²¡æœ‰returnè¯­å¥ï¼Œè¿”å›å€¼ä¸ºNone**


```python
def foo():
    print("æˆ‘æ˜¯å­™æ‚Ÿç©º")

res = foo()
print(res)
```

    æˆ‘æ˜¯å­™æ‚Ÿç©º
    None


### 5.1.6 å»ºè®®

**1ã€å‡½æ•°åŠå…¶å‚æ•°çš„å‘½åå‚ç…§å˜é‡çš„å‘½å**

* å­—æ¯å°å†™åŠä¸‹åˆ’çº¿ç»„åˆ

* æœ‰å®é™…æ„ä¹‰

**2ã€åº”åŒ…å«ç®€è¦é˜è¿°å‡½æ•°åŠŸèƒ½çš„æ³¨é‡Šï¼Œæ³¨é‡Šç´§è·Ÿå‡½æ•°å®šä¹‰åé¢**


```python
def foo():
    # è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä¸ºäº†ã€‚
    pass
```

**3ã€å‡½æ•°å®šä¹‰å‰åå„ç©ºä¸¤è¡Œ**


```python
def f1():
    pass

                 # ç©ºå‡ºä¸¤è¡Œï¼Œä»¥ç¤ºæ¸…ç™½
def f2():
    pass


def f3(x=3):    # é»˜è®¤å‚æ•°èµ‹å€¼ç­‰å·ä¸¤ä¾§ä¸éœ€åŠ ç©ºæ ¼
    pass


# ...
```

**4ã€é»˜è®¤å‚æ•°èµ‹å€¼ç­‰å·ä¸¤ä¾§ä¸éœ€åŠ ç©ºæ ¼**

## 5.2 å‡½æ•°å¼ç¼–ç¨‹å®ä¾‹

**æ¨¡å—åŒ–ç¼–ç¨‹æ€æƒ³**

* è‡ªé¡¶å‘ä¸‹ï¼Œåˆ†è€Œæ²»ä¹‹

**ã€é—®é¢˜æè¿°ã€‘**  

* å°ä¸¹å’Œå°ä¼Ÿç¾½æ¯›çƒæ‰“çš„éƒ½ä¸é”™ï¼Œæ°´å¹³ä¹Ÿåœ¨ä¼¯ä»²ä¹‹é—´ï¼Œå°ä¸¹ç•¥èƒœä¸€ç­¹ï¼ŒåŸºæœ¬ä¸Šï¼Œæ‰“100ä¸ªçƒï¼Œå°ä¸¹èƒ½èµ¢55æ¬¡ï¼Œå°ä¼Ÿèƒ½èµ¢45æ¬¡ã€‚ 

* ä½†æ˜¯æ¯æ¬¡å¤§å‹æ¯”èµ›ï¼ˆ1å±€å®šèƒœè´Ÿï¼Œè°å…ˆèµ¢åˆ°21åˆ†ï¼Œè°å°±è·èƒœï¼‰ï¼Œå°ä¸¹èµ¢çš„æ¦‚ç‡è¿œè¿œå¤§äºå°ä¼Ÿï¼Œå°ä¼Ÿå¾ˆæ˜¯ä¸æœæ°”ã€‚

* **èƒ½é€šè¿‡æ¨¡æ‹Ÿå®éªŒï¼Œæ­ç¤ºå…¶ä¸­çš„åŸç†**

**ã€é—®é¢˜æŠ½è±¡ã€‘**  

1ã€åœ¨å°ä¸¹Vså°ä¼Ÿçš„äºŒå…ƒæ¯”èµ›ç³»ç»Ÿä¸­ï¼Œå°ä¸¹æ¯çƒè·èƒœæ¦‚ç‡55%ï¼Œå°ä¼Ÿæ¯çƒè·èƒœæ¦‚ç‡45%ï¼›  

2ã€æ¯å±€æ¯”èµ›ï¼Œå…ˆèµ¢21çƒï¼ˆ21åˆ†ï¼‰è€…è·èƒœï¼›  

3ã€å‡è®¾è¿›è¡Œn = 10000å±€ç‹¬ç«‹çš„æ¯”èµ›ï¼Œå°ä¸¹ä¼šè·èƒœå¤šå°‘å±€ï¼Ÿï¼ˆn è¾ƒå¤§çš„æ—¶å€™ï¼Œå®éªŒç»“æœâ‰ˆçœŸå®æœŸæœ›ï¼‰

**ã€é—®é¢˜åˆ†è§£ã€‘**


```python
def main():
    # ä¸»è¦é€»è¾‘
    prob_A, prob_B, number_of_games = get_inputs()                        # è·å–åŸå§‹æ•°æ®
    win_A, win_B = sim_n_games(prob_A, prob_B, number_of_games)           # è·å–æ¨¡æ‹Ÿç»“æœ
    print_summary(win_A, win_B, number_of_games)                          # ç»“æœæ±‡æ€»è¾“å‡º
```

**1ã€è¾“å…¥åŸå§‹æ•°æ®**


```python
def get_inputs():  
    # è¾“å…¥åŸå§‹æ•°æ®
    prob_A = eval(input("è¯·è¾“å…¥è¿åŠ¨å‘˜Açš„æ¯çƒè·èƒœæ¦‚ç‡(0~1)ï¼š"))
    prob_B = round(1-prob_A, 2)
    number_of_games = eval(input("è¯·è¾“å…¥æ¨¡æ‹Ÿçš„åœºæ¬¡ï¼ˆæ­£æ•´æ•°ï¼‰ï¼š"))
    print("æ¨¡æ‹Ÿæ¯”èµ›æ€»æ¬¡æ•°ï¼š", number_of_games)
    print("A é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š", prob_A)
    print("B é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š", prob_B)
    return prob_A, prob_B, number_of_games
```

**&emsp;&emsp;å•å…ƒæµ‹è¯•**


```python
prob_A, prob_B, number_of_games = get_inputs()
print(prob_A, prob_B, number_of_games)
```

    è¯·è¾“å…¥è¿åŠ¨å‘˜Açš„æ¯çƒè·èƒœæ¦‚ç‡(0~1)ï¼š0.55
    è¯·è¾“å…¥æ¨¡æ‹Ÿçš„åœºæ¬¡ï¼ˆæ­£æ•´æ•°ï¼‰ï¼š10000
    æ¨¡æ‹Ÿæ¯”èµ›æ€»æ¬¡æ•°ï¼š 10000
    A é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š 0.55
    B é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š 0.45
    0.55 0.45 10000


**2ã€å¤šåœºæ¯”èµ›æ¨¡æ‹Ÿ**


```python
def sim_n_games(prob_A, prob_B, number_of_games):
    # æ¨¡æ‹Ÿå¤šåœºæ¯”èµ›çš„ç»“æœ
    win_A, win_B = 0, 0                # åˆå§‹åŒ–Aã€Bè·èƒœçš„åœºæ¬¡
    for i in range(number_of_games):   # è¿­ä»£number_of_gamesæ¬¡
        score_A, score_B = sim_one_game(prob_A, prob_B)  # è·å¾—æ¨¡æ‹Ÿä¾æ¬¡æ¯”èµ›çš„æ¯”åˆ†
        if score_A > score_B:
            win_A += 1
        else:
            win_B += 1
    return win_A, win_B
```


```python
import random
def sim_one_game(prob_A, prob_B):
    # æ¨¡æ‹Ÿä¸€åœºæ¯”èµ›çš„ç»“æœ
    score_A, score_B = 0, 0
    while not game_over(score_A, score_B):
        if random.random() < prob_A:                # random.random() ç”Ÿäº§[0,1)ä¹‹é—´çš„éšæœºå°æ•°,å‡åŒ€åˆ†å¸ƒ
            score_A += 1                 
        else:
            score_B += 1
    return score_A, score_B
```


```python
def game_over(score_A, score_B):
    # å•åœºæ¨¡æ‹Ÿç»“æŸæ¡ä»¶ï¼Œä¸€æ–¹å…ˆè¾¾åˆ°21åˆ†ï¼Œæ¯”èµ›ç»“æŸ
    return score_A == 21 or score_B == 21
```

**&emsp;&emsp;è¿›è¡Œå•å…ƒæµ‹è¯• ç”¨assertâ€”â€”æ–­è¨€**

* assert expression

* è¡¨è¾¾å¼ç»“æœä¸º false çš„æ—¶å€™è§¦å‘å¼‚å¸¸


```python
assert game_over(21, 8) == True   
assert game_over(9, 21) == True
assert game_over(11, 8) == False
assert game_over(21, 8) == False
```


    ---------------------------------------------------------------------------
    
    AssertionError                            Traceback (most recent call last)
    
    <ipython-input-42-88b651626036> in <module>
          2 assert game_over(9, 21) == True
          3 assert game_over(11, 8) == False
    ----> 4 assert game_over(21, 8) == False


    AssertionError: 



```python
print(sim_one_game(0.55, 0.45))
print(sim_one_game(0.7, 0.3))
print(sim_one_game(0.2, 0.8))
```

    (21, 7)
    (21, 14)
    (10, 21)



```python
print(sim_n_games(0.55, 0.45, 1000))
```

    (731, 269)


**3ã€ç»“æœæ±‡æ€»è¾“å‡º**


```python
def print_summary(win_A, win_B, number_of_games):
    # ç»“æœæ±‡æ€»è¾“å‡º
    print("å…±æ¨¡æ‹Ÿäº†{}åœºæ¯”èµ›".format(number_of_games))
    print("é€‰æ‰‹Aè·èƒœ{0}åœºï¼Œå æ¯”{1:.1%}".format(win_A, win_A/number_of_games))
    print("é€‰æ‰‹Bè·èƒœ{0}åœºï¼Œå æ¯”{1:.1%}".format(win_B, win_B/number_of_games))
```


```python
print_summary(729, 271, 1000)
```

    å…±æ¨¡æ‹Ÿäº†1000åœºæ¯”èµ›
    é€‰æ‰‹Aè·èƒœ729åœºï¼Œå æ¯”72.9%
    é€‰æ‰‹Bè·èƒœ271åœºï¼Œå æ¯”27.1%



```python
import random


def get_inputs():  
    # è¾“å…¥åŸå§‹æ•°æ®
    prob_A = eval(input("è¯·è¾“å…¥è¿åŠ¨å‘˜Açš„æ¯çƒè·èƒœæ¦‚ç‡(0~1)ï¼š"))
    prob_B = round(1-prob_A, 2)
    number_of_games = eval(input("è¯·è¾“å…¥æ¨¡æ‹Ÿçš„åœºæ¬¡ï¼ˆæ­£æ•´æ•°ï¼‰ï¼š"))
    print("æ¨¡æ‹Ÿæ¯”èµ›æ€»æ¬¡æ•°ï¼š", number_of_games)
    print("A é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š", prob_A)
    print("B é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š", prob_B)
    return prob_A, prob_B, number_of_games


def game_over(score_A, score_B):
    # å•åœºæ¨¡æ‹Ÿç»“æŸæ¡ä»¶ï¼Œä¸€æ–¹å…ˆè¾¾åˆ°21åˆ†ï¼Œæ¯”èµ›ç»“æŸ    
    return score_A == 21 or score_B == 21


def sim_one_game(prob_A, prob_B):
    # æ¨¡æ‹Ÿä¸€åœºæ¯”èµ›çš„ç»“æœ
    score_A, score_B = 0, 0
    while not game_over(score_A, score_B):
        if random.random() < prob_A:                # random.random() ç”Ÿäº§[0,1)ä¹‹é—´çš„éšæœºå°æ•°,å‡åŒ€åˆ†å¸ƒ
            score_A += 1                 
        else:
            score_B += 1
    return score_A, score_B


def sim_n_games(prob_A, prob_B, number_of_games):
    # æ¨¡æ‹Ÿå¤šåœºæ¯”èµ›çš„ç»“æœ
    win_A, win_B = 0, 0                # åˆå§‹åŒ–Aã€Bè·èƒœçš„åœºæ¬¡
    for i in range(number_of_games):   # è¿­ä»£number_of_gamesæ¬¡
        score_A, score_B = sim_one_game(prob_A, prob_B)  # è·å¾—æ¨¡æ‹Ÿä¾æ¬¡æ¯”èµ›çš„æ¯”åˆ†
        if score_A > score_B:
            win_A += 1
        else:
            win_B += 1
    return win_A, win_B


def print_summary(win_A, win_B, number_of_games):
    # ç»“æœæ±‡æ€»è¾“å‡º
    print("å…±æ¨¡æ‹Ÿäº†{}åœºæ¯”èµ›".format(number_of_games))
    print("\033[31mé€‰æ‰‹Aè·èƒœ{0}åœºï¼Œå æ¯”{1:.1%}".format(win_A, win_A/number_of_games))
    print("é€‰æ‰‹Bè·èƒœ{0}åœºï¼Œå æ¯”{1:.1%}".format(win_B, win_B/number_of_games))
    

def main():
    # ä¸»è¦é€»è¾‘
    prob_A, prob_B, number_of_games = get_inputs()                        # è·å–åŸå§‹æ•°æ®
    win_A, win_B = sim_n_games(prob_A, prob_B, number_of_games)           # è·å–æ¨¡æ‹Ÿç»“æœ
    print_summary(win_A, win_B, number_of_games)                          # ç»“æœæ±‡æ€»è¾“å‡º


if __name__ == "__main__":
    main()
```

    è¯·è¾“å…¥è¿åŠ¨å‘˜Açš„æ¯çƒè·èƒœæ¦‚ç‡(0~1)ï¼š0.52
    è¯·è¾“å…¥æ¨¡æ‹Ÿçš„åœºæ¬¡ï¼ˆæ­£æ•´æ•°ï¼‰ï¼š10000
    æ¨¡æ‹Ÿæ¯”èµ›æ€»æ¬¡æ•°ï¼š 10000
    A é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š 0.52
    B é€‰æ‰‹æ¯çƒè·èƒœæ¦‚ç‡ï¼š 0.48
    å…±æ¨¡æ‹Ÿäº†10000åœºæ¯”èµ›
    [31mé€‰æ‰‹Aè·èƒœ6033åœºï¼Œå æ¯”60.3%
    é€‰æ‰‹Bè·èƒœ3967åœºï¼Œå æ¯”39.7%


ç»ç»Ÿè®¡ï¼Œå°ä¸¹è·Ÿå°ä¼Ÿ14å¹´èŒä¸šç”Ÿæ¶¯ï¼Œå…±äº¤æ‰‹40æ¬¡ï¼Œå°ä¸¹ä»¥28:12é¥é¥é¢†å…ˆã€‚ 

å…¶ä¸­ï¼Œä¸¤äººå…±äº¤æˆ˜æ•´æ•´100å±€ï¼š  

å°ä¸¹è·èƒœ61å±€ï¼Œå æ¯”61%ï¼›  

å°ä¼Ÿè·èƒœ39å±€ï¼Œå æ¯”39%ã€‚

## 5.3 åŒ¿åå‡½æ•°

![](https://raw.githubusercontent.com/timerring/picgo/master/picbed/image-20220925215654668.png)

**1ã€åŸºæœ¬å½¢å¼**

lambda å˜é‡: å‡½æ•°ä½“

**2ã€å¸¸ç”¨ç”¨æ³•**  

åœ¨å‚æ•°åˆ—è¡¨ä¸­æœ€é€‚åˆä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œå°¤å…¶æ˜¯ä¸key = æ­é…

* æ’åºsort()  sorted()


```python
ls = [(93, 88), (79, 100), (86, 71), (85, 85), (76, 94)]
ls.sort()
ls
```


    [(76, 94), (79, 100), (85, 85), (86, 71), (93, 88)]




```python
ls.sort(key = lambda x: x[1])# æ ¹æ®æ¯ä¸ªå…ƒç»„çš„ç¬¬äºŒä¸ªæ•°æ®è¿›è¡Œæ’åº
ls
```


    [(86, 71), (85, 85), (93, 88), (76, 94), (79, 100)]




```python
ls = [(93, 88), (79, 100), (86, 71), (85, 85), (76, 94)]
temp = sorted(ls, key = lambda x: x[0]+x[1], reverse=True)# å¾—åˆ°é™åºçš„æ’åº
temp
```


    [(93, 88), (79, 100), (85, 85), (76, 94), (86, 71)]



* max() min()


```python
ls = [(93, 88), (79, 100), (86, 71), (85, 85), (76, 94)]
n = max(ls, key = lambda x: x[1])
n
```


    (79, 100)




```python
n = min(ls, key = lambda x: x[1])
n
```


    (86, 71)



## 5.4 é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡

![](https://raw.githubusercontent.com/timerring/picgo/master/picbed/image-20220925215700327.png)

**é¢å‘è¿‡ç¨‹**â€”â€”ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ï¼Œä»¥â€œä»€ä¹ˆæ­£åœ¨å‘ç”Ÿâ€ä¸ºä¸»è¦ç›®æ ‡è¿›è¡Œç¼–ç¨‹ã€‚&emsp;**å†°å†·çš„ï¼Œç¨‹åºåŒ–çš„**

**é¢å‘å¯¹è±¡**â€”â€”å°†ç°å®ä¸–ç•Œçš„äº‹ç‰©æŠ½è±¡æˆå¯¹è±¡ï¼Œæ›´å…³æ³¨â€œè°åœ¨å—å½±å“â€ï¼Œæ›´åŠ è´´è¿‘ç°å®ã€‚ &ensp;**æœ‰è¡€æœ‰è‚‰ï¼Œæ‹Ÿäººï¼ˆç‰©ï¼‰åŒ–çš„** 

* **ä»¥å…¬å…±æ±½è½¦ä¸ºä¾‹**

**â€œé¢å‘è¿‡ç¨‹â€**ï¼šæ±½è½¦å¯åŠ¨æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œæ±½è½¦åˆ°ç«™æ˜¯å¦ä¸€ä¸ªäº‹ä»¶ã€‚ã€‚ã€‚ã€‚

åœ¨ç¼–ç¨‹åºçš„æ—¶å€™æˆ‘ä»¬å…³å¿ƒçš„æ˜¯æŸä¸€ä¸ªäº‹ä»¶ï¼Œè€Œä¸æ˜¯æ±½è½¦æœ¬èº«ã€‚ 

æˆ‘ä»¬åˆ†åˆ«å¯¹å¯åŠ¨å’Œåˆ°ç«™ç¼–å†™ç¨‹åºã€‚

**"é¢å‘å¯¹è±¡"**ï¼šæ„é€ â€œæ±½è½¦â€è¿™ä¸ªå¯¹è±¡ã€‚  

å¯¹è±¡åŒ…å«åŠ¨åŠ›ã€æœå½¹æ—¶é—´ã€ç”Ÿäº§å‚å®¶ç­‰ç­‰ä¸€ç³»åˆ—çš„â€œå±æ€§â€ï¼›  

ä¹ŸåŒ…å«åŠ æ²¹ã€å¯åŠ¨ã€åŠ é€Ÿã€åˆ¹è½¦ã€æ‹å¼¯ã€é¸£å–‡å­ã€åˆ°ç«™ã€ç»´ä¿®ç­‰ä¸€ç³»åˆ—çš„â€œæ–¹æ³•â€ã€‚  

é€šè¿‡å¯¹è±¡çš„è¡Œä¸ºè¡¨è¾¾ç›¸åº”çš„äº‹ä»¶
